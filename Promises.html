<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promises</title>
</head>
<body>
    <h2>It is all about Promises</h2>

    <script>
        const cart = ["books","Vegetables","Grocery"];
  createOrder(cart)
  .then(function(orderId){
            console.log(orderId);
            return orderId;
        })
//   .then(function(orderId){
//     return proceedToPayment(orderId);
//   })
.then(function(orderId){
    console.log(proceedToPayment(orderId))
    return proceedToPayment(orderId)
})
//   .then(function(){
//     return PaymentInfo();
//   })

  .catch(function(err){
        console.log(err.message);
  })
        function createOrder(cart){
            const pr = new Promise(function(resolve,reject){
                if(!validatecart(cart))
                {
                    const err = new Error("Hey Cart Is Not Valid:");
                    reject(err);
                } 
                const orderId = 325467;
                if(orderId)
                {
                setTimeout(function(){
                         resolve(orderId);
                },3000)}
            })
            return pr;
        }

        function validatecart(cart){
            return true;
        }

        function proceedToPayment(orderId){
           return new Promise(function(resolve,reject){
            const paymentInfo = 'payment Done Via Phone Pay:';
                if(paymentInfo)
                {
                setTimeout(function(){
                        //  resolve(paymentInfo);
                        resolve(`${paymentInfo} and Order id is : ${orderId}`);
                },1000)}
            else
            {
                reject(`Operation is not successful `);
            }
           })
        }

        //    function PaymentInfo(){
        //     return new Promise(function(res,rej){
        //         console.log("And All operations were Done Successfully");
        //     })
        //    }
        
    </script>
</body>
</html>